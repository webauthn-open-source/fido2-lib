<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Fido2AssertionResult.html">Fido2AssertionResult</a></li><li><a href="Fido2AttestationResult.html">Fido2AttestationResult</a></li><li><a href="Fido2Lib.html">Fido2Lib</a><ul class='methods'><li data-type='method'><a href="Fido2Lib.html#assertionOptions">assertionOptions</a></li><li data-type='method'><a href="Fido2Lib.html#assertionResult">assertionResult</a></li><li data-type='method'><a href="Fido2Lib.html#attestationOptions">attestationOptions</a></li><li data-type='method'><a href="Fido2Lib.html#attestationResult">attestationResult</a></li><li data-type='method'><a href="Fido2Lib.html#disableExtension">disableExtension</a></li><li data-type='method'><a href="Fido2Lib.html#enableExtension">enableExtension</a></li><li data-type='method'><a href="Fido2Lib.html#setExtensionOptions">setExtensionOptions</a></li><li data-type='method'><a href="Fido2Lib.html#.addAttestationFormat">addAttestationFormat</a></li><li data-type='method'><a href="Fido2Lib.html#.addExtension">addExtension</a></li><li data-type='method'><a href="Fido2Lib.html#.addMdsCollection">addMdsCollection</a></li><li data-type='method'><a href="Fido2Lib.html#.clearMdsCollections">clearMdsCollections</a></li><li data-type='method'><a href="Fido2Lib.html#.createMdsCollection">createMdsCollection</a></li><li data-type='method'><a href="Fido2Lib.html#.deleteAllAttestationFormats">deleteAllAttestationFormats</a></li><li data-type='method'><a href="Fido2Lib.html#.deleteAllExtensions">deleteAllExtensions</a></li><li data-type='method'><a href="Fido2Lib.html#.findMdsEntry">findMdsEntry</a></li></ul></li><li><a href="Fido2Result.html">Fido2Result</a></li><li><a href="MdsCollection.html">MdsCollection</a><ul class='methods'><li data-type='method'><a href="MdsCollection.html#addEntry">addEntry</a></li><li data-type='method'><a href="MdsCollection.html#addToc">addToc</a></li><li data-type='method'><a href="MdsCollection.html#findEntry">findEntry</a></li><li data-type='method'><a href="MdsCollection.html#getToc">getToc</a></li><li data-type='method'><a href="MdsCollection.html#validate">validate</a></li></ul></li><li><a href="MdsEntry.html">MdsEntry</a></li><li><a href="PublicKey.html">PublicKey</a><ul class='methods'><li data-type='method'><a href="PublicKey.html#fromCose">fromCose</a></li><li data-type='method'><a href="PublicKey.html#fromCryptoKey">fromCryptoKey</a></li><li data-type='method'><a href="PublicKey.html#fromJWK">fromJWK</a></li><li data-type='method'><a href="PublicKey.html#fromPem">fromPem</a></li><li data-type='method'><a href="PublicKey.html#getAlgorithm">getAlgorithm</a></li><li data-type='method'><a href="PublicKey.html#getKey">getKey</a></li><li data-type='method'><a href="PublicKey.html#setAlgorithm">setAlgorithm</a></li><li data-type='method'><a href="PublicKey.html#toCose">toCose</a></li><li data-type='method'><a href="PublicKey.html#toJwk">toJwk</a></li><li data-type='method'><a href="PublicKey.html#toPem">toPem</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#coseAlgToHashStr">coseAlgToHashStr</a></li><li><a href="global.html#coseAlgToStr">coseAlgToStr</a></li><li><a href="global.html#parseAttestationObject">parseAttestationObject</a></li><li><a href="global.html#parseClientResponse">parseClientResponse</a></li></ul>
    
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme usertext">
        <article><p><a href="https://github.com/webauthn-open-source/fido2-lib/actions/workflows/test.yml"><img src="https://github.com/webauthn-open-source/fido2-lib/actions/workflows/test.yml/badge.svg" alt="Node/Deno CI"></a>
<a href="https://codecov.io/gh/webauthn-open-source/fido2-lib"><img src="https://codecov.io/gh/webauthn-open-source/fido2-lib/branch/master/graph/badge.svg" alt="Code Coverage"></a>
<a href="https://snyk.io/test/github/webauthn-open-source/fido2-lib?targetFile=package.json"><img src="https://snyk.io/test/github/webauthn-open-source/fido2-lib/badge.svg?targetFile=package.json" alt="Known Vulnerabilities"></a>
<a href="https://badge.fury.io/js/fido2-lib"><img src="https://badge.fury.io/js/fido2-lib.svg" alt="npm version"></a> <a href="https://securityscorecards.dev/viewer/?uri=github.com/webauthn-open-source/fido2-lib"><img src="https://api.securityscorecards.dev/projects/github.com/webauthn-open-source/fido2-lib/badge" alt="OpenSSF Scorecard"></a></p>
<h2>Overview</h2>
<p>A library for performing FIDO 2.0 / WebAuthn server functionality</p>
<p>This library contains all the functionality necessary for implementing a full FIDO2 / WebAuthn server. It intentionally does not implement any kind of networking protocol (e.g. - REST endpoints) so that it can remain independent of any messaging protocols.</p>
<p>There are four primary functions:</p>
<ol>
<li><a href="https://webauthn-open-source.github.io/fido2-lib/Fido2Lib.html#attestationOptions">attestationOptions</a> - creates the challenge that will be sent to the client (e.g. - browser) for the credential create call. Note that the library does not keep track of sessions or context, so the caller is expected to associate the resulting challenge with a session so that it can be appropriately matched with a response.</li>
<li><a href="https://webauthn-open-source.github.io/fido2-lib/Fido2Lib.html#attestationResult">attestationResult</a> - parses and validates the response from the client</li>
<li><a href="https://webauthn-open-source.github.io/fido2-lib/Fido2Lib.html#assertionOptions">assertionOptions</a> - creates the challenge that will be sent to the client for credential assertion.</li>
<li><a href="https://webauthn-open-source.github.io/fido2-lib/Fido2Lib.html#assertionResult">assertionResult</a> - parses and validates the response from the client</li>
</ol>
<p>There is also an extension point for adding new attestation formats.</p>
<p>Full documentation can be found <a href="https://webauthn-open-source.github.io/fido2-lib/">here</a>.</p>
<p>For working examples see <a href="https://github.com/OWASP/SSO_Project">OWASP Single Sign-On</a> and / or <a href="https://webauthn.io/">webauthn.io</a></p>
<h2>Features</h2>
<ul>
<li>Works with Windows Hello</li>
<li>Attestation formats: packed, tpm, android-safetynet, fido-u2f, none, apple</li>
<li>Convenient API for adding more attestation formats</li>
<li>Convenient API for adding extensions</li>
<li>Metadata service (MDS) support enables authenticator root of trust and authenticator metadata</li>
<li>Support for multiple simultaneous metadata services (e.g. FIDO MDS 1-3)</li>
<li>Crypto families: ECDSA, RSA</li>
<li>x509 cert parsing, support for FIDO-related extensions, and NIST Public Key Interoperability Test Suite (PKITS) chain validation (from <a href="https://github.com/PeculiarVentures/PKI.js/">pki.js</a>)</li>
<li>Returns parsed and validated data, along with extra audit data for risk engines</li>
<li>Support both CommonJS (<code>require</code>) and ESM (<code>import</code>) natively</li>
</ul>
<h2>Getting started</h2>
<h3>Node</h3>
<pre class="prettyprint source lang-bash"><code>npm install fido2-lib --save
</code></pre>
<h4>Import Library using CommonJS</h4>
<pre class="prettyprint source lang-js"><code>const { Fido2Lib } = require(&quot;fido2-lib&quot;);
</code></pre>
<h4>Import Library using ESM-syntax</h4>
<pre class="prettyprint source lang-js"><code>import { Fido2Lib } from &quot;fido2-lib&quot;;
</code></pre>
<h3>Deno</h3>
<p>Import <code>dist/main.js</code> from a trusted source. Below is only an example, using the official deno.land repository.
It is recommended to <a href="https://deno.land/manual/linking_to_external_code/integrity_checking">enable integrity checking</a>.</p>
<pre class="prettyprint source lang-js"><code>import { Fido2Lib } from &quot;https://deno.land/x/fido2@$VERSION/dist/main.js&quot;;
</code></pre>
<details>
  <summary>Add Type Declarations</summary>
<p>Firstly, you need to set up a <a href="https://deno.land/manual/basics/import_maps">import map</a>.
Put the following lines into your import map.</p>
<pre class="prettyprint source lang-json"><code>{
  &quot;imports&quot;: {
    &quot;fido2-lib&quot;: &quot;https://deno.land/x/fido2@$VERSION/dist/main.js&quot;
  }
}
</code></pre>
<p>Then you can import the library like this:</p>
<pre class="prettyprint source lang-ts"><code>// @deno-types=&quot;https://deno.land/x/fido2@$VERSION/types/main.d.ts&quot;
import { Fido2Lib } from &quot;fido2-lib&quot;;
</code></pre>
</details>
<p>Don't forget to replace <code>$VERSION</code> with the specific version. You can find the latest version by checking the redirection of <a href="https://deno.land/x/fido2/dist/main.js">deno.land/x/fido2/dist/main.js</a> and <a href="https://deno.land/x/fido2/types/main.d.ts">deno.land/x/fido2/types/main.d.ts</a>.</p>
<h2>Examples</h2>
<p><strong>Instantiate Library (Complex):</strong></p>
<pre class="prettyprint source lang-js"><code>// could also use one or more of the options below,
// which just makes the options calls easier later on:
const f2l = new Fido2Lib({
    timeout: 42,
    rpId: &quot;example.com&quot;,
    rpName: &quot;ACME&quot;,
    rpIcon: &quot;https://example.com/logo.png&quot;,
    challengeSize: 128,
    attestation: &quot;none&quot;,
    cryptoParams: [-7, -257],
    authenticatorAttachment: &quot;platform&quot;,
    authenticatorRequireResidentKey: false,
    authenticatorUserVerification: &quot;required&quot;
});
</code></pre>
<p><strong>Registration:</strong></p>
<pre class="prettyprint source lang-js"><code>const registrationOptions = await f2l.attestationOptions();

// make sure to add registrationOptions.user.id
// save the challenge in the session information...
// send registrationOptions to client and pass them in to `navigator.credentials.create()`...
// get response back from client (clientAttestationResponse)

const attestationExpectations = {
    challenge: &quot;33EHav-jZ1v9qwH783aU-j0ARx6r5o-YHh-wd7C6jPbd7Wh6ytbIZosIIACehwf9-s6hXhySHO-HHUjEwZS29w&quot;,
    origin: &quot;https://localhost:8443&quot;,
    factor: &quot;either&quot;
};
const regResult = await f2l.attestationResult(clientAttestationResponse, attestationExpectations); // will throw on error

// registration complete!
// save publicKey and counter from regResult to user's info for future authentication calls
</code></pre>
<p><strong>Authentication:</strong></p>
<pre class="prettyprint source lang-js"><code>const authnOptions = await f2l.assertionOptions();

// add allowCredentials to limit the number of allowed credential for the authentication process. For further details refer to webauthn specs: (https://www.w3.org/TR/webauthn-2/#dom-publickeycredentialrequestoptions-allowcredentials).
// save the challenge in the session information...
// send authnOptions to client and pass them in to `navigator.credentials.get()`...
// get response back from client (clientAssertionResponse)

const assertionExpectations = {
    // Remove the following comment if allowCredentials has been added into authnOptions so the credential received will be validate against allowCredentials array.
    // allowCredentials: [{
    //     id: &quot;lTqW8H/lHJ4yT0nLOvsvKgcyJCeO8LdUjG5vkXpgO2b0XfyjLMejRvW5oslZtA4B/GgkO/qhTgoBWSlDqCng4Q==&quot;,
    //     type: &quot;public-key&quot;,
    //     transports: [&quot;usb&quot;]
    // }],
    challenge: &quot;eaTyUNnyPDDdK8SNEgTEUvz1Q8dylkjjTimYd5X7QAo-F8_Z1lsJi3BilUpFZHkICNDWY8r9ivnTgW7-XZC3qQ&quot;,
    origin: &quot;https://localhost:8443&quot;,
    factor: &quot;either&quot;,
    publicKey: &quot;-----BEGIN PUBLIC KEY-----\n&quot; +
        &quot;MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAERez9aO2wBAWO54MuGbEqSdWahSnG\n&quot; +
        &quot;MAg35BCNkaE3j8Q+O/ZhhKqTeIKm7El70EG6ejt4sg1ZaoQ5ELg8k3ywTg==\n&quot; +
        &quot;-----END PUBLIC KEY-----\n&quot;,
    prevCounter: 362
};
const authnResult = await f2l.assertionResult(clientAssertionResponse, assertionExpectations); // will throw on error

// authentication complete!
</code></pre>
<p>For a real-life example, refer to <a href="https://github.com/OWASP/SSO_Project">OWASP Single Sign-On</a>.</p>
<h2>Migration from v2 to v3</h2>
<p>Generally v3 is assumed to be completely compatible with v2 - compatibility should have increased.
As many inner workings have been changed, please verify that your application still works with v3 and report issues, if you newly encounter bugs.</p>
<h2>Contributing</h2>
<h4>Setting up the environment</h4>
<p>It's recommended to have both Deno (&gt;=1.20) and Node 16-18 available to be able to run all checks and tests.</p>
<h3>Before committing</h3>
<p>Please run <code>npm run lint</code>, <code>npm run test</code> and <code>deno task test</code> before committing, to make sure every test and check passes.</p>
<p>See <a href="/package.json">package.json</a> for available npm scripts, and <a href="/deno.jsonc">deno.jsonc</a> for available Deno tasks.</p>
<p>Make sure to add tests if you add new features.</p>
<p><strong>Important:</strong> Do not stage/commit <code>dist/main.js</code> and <code>dist/main.cjs</code>. These are generated and committed automatically by the CI-pipeline.</p>
<h3>Dependencies</h3>
<p>When adding, removing or updating dependencies, start out with npm as usual. Then update <code>import_map.json</code> to the same versions shown by <code>npm list</code>, and run <code>deno task update-deps</code> to update the Deno lock-file.</p>
<h3>Pull Request</h3>
<p>When you're finished with the changes, create a pull request.</p>
<ul>
<li>Enable the checkbox to <a href="https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/allowing-changes-to-a-pull-request-branch-created-from-a-fork">allow maintainer edits</a> so the branch can be updated for a merge.
Once you submit your PR, a team member will review your proposal. We may ask questions or request for additional information.</li>
<li>If you run into any merge issues, checkout this <a href="https://lab.github.com/githubtraining/managing-merge-conflicts">git tutorial</a> to help you resolve merge conflicts and other issues.</li>
</ul>
<h2>Sponsor</h2>
<p>Work for this project was supported by <a href="https://github.com/apowers313">Adam Power</a>.</p></article>
    </section>






    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Sat Sep 30 2023 20:15:44 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>